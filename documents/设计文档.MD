# 私人导航网站设计

## 1. 项目概述

本项目旨在取代上网导航主页，用简洁美观的页面，来进行便捷的上网浏览操作。它不仅是一个私人导航站，还支持用户注册、登录，并可以选择性地将自己主页的部分或全部内容分享给其他用户。

## 2. 技术选型

*   **构建工具**: Vite
*   **前端框架**: Vue 3 (Composition API)
*   **语言**: TypeScript
*   **UI 库**: Element Plus (或 Tailwind CSS，待定)
*   **状态管理**: Pinia (Vue 官方推荐)
*   **图标**: Iconify 或 Element Plus Icons
*   **后端框架**: Node.js with Express.js (或 FastAPI/Python, 待定)
*   **数据库**: SQLite (开发/轻量) / PostgreSQL (生产, 待定)
*   **用户认证**: JWT (JSON Web Tokens)
*   **部署**:
    *   前端: 静态网站托管 (如 Netlify, Vercel) 或与后端同域部署。
    *   后端: 云服务器 (如 AWS, Azure, GCP) 或容器化部署 (Docker)。

## 3. 架构设计

### 3.1 整体架构

采用前后端分离的架构模式。
*   **前端 (Frontend)**: 负责用户界面展示、用户交互、状态管理和与后端 API 通信。部署为静态资源。
*   **后端 (Backend)**: 提供 RESTful API 或 GraphQL API，处理业务逻辑、用户认证、数据存储。独立部署。
*   **数据库 (Database)**: 存储用户信息、链接数据、分类数据、分享配置等。

```
+----------------+        REST/GraphQL API       +----------------+
|                |  <--------------------->     |                |
|   Frontend     |                              |   Backend      |
| (Vue 3, Vite)  |                              | (Node/Express) |
|                |                              |                |
+----------------+                              +----------------+
                                                       |
                                                       | Database
                                                       v
                                                +-------------+
                                                |             |
                                                |  Database   |
                                                | (SQLite/PG) |
                                                |             |
                                                +-------------+
```

### 3.2 前端架构

*   **项目结构**:
    ```
    src/
    ├── assets/           # 静态资源 (如 logos, 默认图标)
    ├── components/       # 可复用组件 (如 LinkItem, CategorySection)
    ├── composables/      # Vue composables (如 useLinks, useCategories)
    ├── layouts/          # 布局组件 (如 DefaultLayout, AuthLayout)
    ├── pages/            # 路由页面 (如 HomeView, ManageView, LoginView)
    ├── router/           # Vue Router 配置
    ├── stores/           # Pinia 状态存储
    ├── styles/           # 全局样式文件
    ├── types/            # TypeScript 类型定义
    ├── utils/            # 工具函数 (如 API 请求封装, localStorage 操作)
    ├── App.vue           # 根组件
    ├── main.ts           # 应用入口
    ├── vite-env.d.ts     # Vite 类型声明
    ```
*   **核心模块**:
    *   **认证模块**: 处理用户登录、注册、登出、JWT token 管理。
    *   **链接管理模块**: 负责链接的增删改查逻辑。
    *   **分类管理模块**: 负责分类的增删改查及排序逻辑。
    *   **分享模块**: 管理用户的分享设置（如公开、私有、部分可见）。
    *   **搜索模块**: 实现对链接标题、URL 等的搜索功能。
    *   **数据存储模块**: 封装 API 请求和 LocalStorage 操作。
*   **状态管理**:
    *   使用 Pinia 管理全局状态，如用户信息、所有链接列表、分类列表、用户设置等。
    *   状态应设计为响应式，以便组件能自动更新。
*   **路由**:
    *   `/`: 游客可见的分享主页或重定向到登录页。
    *   `/home`: 登录用户的私人主页。
    *   `/manage`: 管理页，用于添加/编辑/删除链接和分类。
    *   `/settings`: 设置页，用于个性化配置和分享设置。
    *   `/login`, `/register`: 认证相关页面。
*   **数据模型 (前端)**:
    *   **Link**:
        *   `id: string`
        *   `title: string`
        *   `url: string`
        *   `description?: string`
        *   `categoryId: string`
        *   `icon?: string` (URL or Base64)
    *   **Category**:
        *   `id: string`
        *   `name: string`
        *   `order: number`
    *   **User**:
        *   `id: string`
        *   `username: string`
        *   `email: string`
        *   `settings: UserSettings` (主题等)
        *   `shareSettings: ShareSettings` (分享配置)

### 3.3 后端架构

*   **项目结构 (示例 Node/Express)**:
    ```
    server/
    ├── src/
    │   ├── controllers/   # 处理请求逻辑 (如 authController, linkController)
    │   ├── middleware/    # 中间件 (如 authMiddleware, errorHandler)
    │   ├── models/        # 数据模型 (如 User, Link, Category)
    │   ├── routes/        # API 路由定义
    │   ├── services/      # 业务逻辑 (如 authService, linkService)
    │   ├── utils/         # 工具函数 (如 db connection, jwt utils)
    │   ├── config/        # 配置文件 (如 database, jwt)
    │   ├── app.js         # Express 应用实例
    │   └── server.js      # 服务器入口
    ├── package.json
    └── ... (其他配置文件)
    ```
*   **核心模块**:
    *   **认证模块**: 处理用户注册、登录、JWT token 生成与验证。
    *   **用户模块**: 管理用户信息、设置、分享配置。
    *   **链接模块**: 处理链接的 CRUD 操作及权限验证。
    *   **分类模块**: 处理分类的 CRUD 操作及权限验证。
    *   **分享模块**: 根据用户分享设置，处理对非登录用户的访问控制。
*   **API 设计 (示例)**:
    *   `POST /api/auth/register`: 用户注册
    *   `POST /api/auth/login`: 用户登录
    *   `GET /api/users/me`: 获取当前用户信息
    *   `PUT /api/users/me`: 更新用户信息/设置
    *   `GET /api/links`: 获取用户所有链接 (需认证)
    *   `POST /api/links`: 创建链接 (需认证)
    *   `PUT /api/links/:id`: 更新链接 (需认证)
    *   `DELETE /api/links/:id`: 删除链接 (需认证)
    *   `GET /api/categories`: 获取用户所有分类 (需认证)
    *   `GET /api/public/:userId/links`: 获取指定用户分享的链接 (根据分享设置)
*   **数据库设计 (简化)**:
    *   **Users**:
        *   `id` (Primary Key)
        *   `username` (Unique)
        *   `email` (Unique)
        *   `password_hash`
        *   `created_at`
        *   `updated_at`
    *   **Links**:
        *   `id` (Primary Key)
        *   `user_id` (Foreign Key to Users)
        *   `title`
        *   `url`
        *   `description`
        *   `category_id` (Foreign Key to Categories)
        *   `icon`
        *   `created_at`
        *   `updated_at`
    *   **Categories**:
        *   `id` (Primary Key)
        *   `user_id` (Foreign Key to Users)
        *   `name`
        *   `order`
        *   `created_at`
        *   `updated_at`
    *   **User_Settings** (或作为 JSON 字段在 Users 表):
        *   `user_id` (Primary Key, Foreign Key to Users)
        *   `theme`
        *   `share_mode` (public, private, selective)
        *   ... (其他设置)

### 3.4 安全性

*   **认证**: 使用 JWT 进行用户认证，确保 API 请求的安全性。
*   **授权**: 后端 API 需要验证用户权限，确保用户只能访问和操作自己的数据。
*   **数据传输**: 使用 HTTPS 加密所有前后端通信。
*   **密码存储**: 用户密码必须经过强哈希处理（如 bcrypt）后存储。

## 4. 开发计划

*   **M1: 基础框架与核心功能**
    *   使用 Vite 初始化 Vue 3 + TypeScript 前端项目。
    *   初始化 Node.js/Express 后端项目。
    *   集成前端 UI 库和 Pinia。
    *   配置前后端路由。
    *   实现基础的用户注册、登录、认证流程 (JWT)。
    *   实现链接和分类的基本 CRUD API (带用户权限验证)。
    *   前端对接认证和基础 CRUD API。
*   **M2: 功能完善与分享**
    *   实现前端链接和分类的管理界面。
    *   开发后端分享功能 API (`/api/public/:userId/links`)。
    *   开发前端的分享设置页面。
    *   开发可被分享的主页视图。
    *   实现搜索功能。
    *   完善 UI/UX 设计，确保响应式。
*   **M3: 个性化与发布**
    *   添加主题切换等个性化功能。
    *   进行全面测试 (单元测试，集成测试)。
    *   部署前端和后端应用。
    *   (可选) 实现用户头像、导入/导出书签等功能。